<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Exit Animations Chris Coyier | PicoDash</title><meta name=generator content="Hugo 0.98.0"><meta name=description content="How do you animate an element as it leaves the DOM?
You can’t, is the historical answer. As soon as an element is removed from the DOM, it immediately disappears, there is no animation opportunity. The trick is to animate it as if it is leaving, wait for the animation is finished, then actually remove it from the DOM. Element.classList.add(&#34;do-outgoing-animation&#34;); setTimeout(() => { Element.remove(); }, SAME_TIMING_AS_ANIMATION_IN_CSS);Code language: CSS (css) You could also wait for an animationend event or whatever."><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cayman/css/normalize.css><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet type=text/css><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cayman/css/cayman.css><link rel=apple-touch-icon sizes=180x180 href=./apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=./favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=./favicon-16x16.png><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css integrity=sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js integrity=sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script></head><body><section class=page-header><h1 class=project-name>PicoDash</h1><h2 class=project-tagline></h2><nav><a href=./index.html class=btn>Blog</a>
<a href=./sitemap.xml class=btn>Sitemap</a>
<a href=./index.xml class=btn>RSS</a></nav></section><section class=main-content><h1>Exit Animations Chris Coyier</h1><div><strong>Publish date: </strong>2024-03-19</div><img src="https://cdn.statically.io/img/jetpack.com/redirect/?source=sigenerate&query=t%3DeyJpbWciOiJodHRwczpcL1wvY2hyaXNjb3lpZXIubmV0XC93cC1jb250ZW50XC91cGxvYWRzXC8yMDIzXC8xMFwvZ2VtbWEtZXZhbnMtbGJ6b1dtSUdUOTAtdW5zcGxhc2gtNzY4eDEwMjQuanBnIiwidHh0IjoiRXhpdCBBbmltYXRpb25zIiwidGVtcGxhdGUiOiJmdWxsc2NyZWVuIiwiYmxvZ19pZCI6NzQwNzQyNDh9.m5-7F-Fur5mPwX1lOhWswQZS1vKcziCSooMUBKnnhaoMQ" style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>How do you animate an element as it leaves the DOM?</p><p>You can’t, is the historical answer. As soon as an element is removed from the DOM, it immediately disappears, there is no animation opportunity. The trick is to animate it as if it is leaving, wait for the animation is finished, then actually remove it from the DOM.</p><pre class=wp-block-code aria-describedby=shcb-language-1 data-shcb-language-name=CSS data-shcb-language-slug=css><span><code class="hljs language-css"><span class=hljs-selector-tag>Element</span><span class=hljs-selector-class>.classList</span><span class=hljs-selector-class>.add</span>("<span class=hljs-selector-tag>do-outgoing-animation</span>"); <span class=hljs-selector-tag>setTimeout</span>(() =&gt; { Element.remove(); }, <span class=hljs-selector-tag>SAME_TIMING_AS_ANIMATION_IN_CSS</span>);</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>CSS</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>css</span><span class=shcb-language__paren>)</span></pre><p>You could also wait for an <code>animationend</code> event or whatever. That’s awkward and error-prone, at a minimum. Plus, if you’re using a JavaScript framework, you aren’t really in charge of when that element gets removed from the DOM, that happens somewhere in the bowels of the framework, so doing this will have a different approach in all of them.</p><p>View Transitions have opened up a bit of a door here, because of how they animate a rasterized version of the element. That means theoretically the element can be removed from the DOM immediately but we could still do an animation. It does actually work:</p><pre class=wp-block-code aria-describedby=shcb-language-2 data-shcb-language-name=JavaScript data-shcb-language-slug=javascript><span><code class="hljs language-javascript">Element.style.viewTransitionName = <span class=hljs-string>"unique-outgoing-ident"</span>; Element.remove();</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>JavaScript</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>javascript</span><span class=shcb-language__paren>)</span></pre><pre class=wp-block-code aria-describedby=shcb-language-3 data-shcb-language-name=CSS data-shcb-language-slug=css><span><code class="hljs language-css"><span class=hljs-selector-pseudo>::view-transition-old(unique-outgoing-ident)</span> { <span class=hljs-attribute>animation</span>: outgoing <span class=hljs-number>1s</span>; }</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>CSS</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>css</span><span class=shcb-language__paren>)</span></pre><p>I don’t find this terribly elegant either. Every outgoing element needs a unique identifier otherwise the animation breaks. That’s just an annoying feature of an API where it’s highly likely you’re essentially just applying the same animation.</p><p>Jessica Janiuk has proposed <a href=#>Exit animations (<code>@exit-style</code>)</a>. Which I’m liking so far. It pairs up with <code>@starting-style</code> which is also super useful for essentially the same reason in reverse.</p><pre class=wp-block-code aria-describedby=shcb-language-4 data-shcb-language-name=CSS data-shcb-language-slug=css><span><code class="hljs language-css"><span class=hljs-selector-class>.posts</span> { &gt; li { <span class=hljs-attribute>transition</span>: .<span class=hljs-number>4s</span> opacity; @exit-style { <span class=hljs-attribute>opacity</span>: <span class=hljs-number>0</span>; } } }</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>CSS</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>css</span><span class=shcb-language__paren>)</span></pre><p>I really like how you don’t need to name anything there. Very elegant pairing with an existing API and CSS nesting.</p><p>There is also the extremely bizarrely named <code>transition-behavior: allow-discrete</code> which is a smidge of prior art here. You could use this is, for example, rather than removing an element from the DOM, you set <code>display: none</code>. Previously, the <code>display</code> property wasn’t really “animatable” because it would “flip” to the new value immediately in an animation/transition. So this new behavior-setter allows it to flip at the end instead. Useful, but it doesn’t help with DOM removal.</p><p>Annnnyway, I hope <code>@exit-style</code> or <code>@exiting-style</code> or <code>@outgoing-style</code> or <code>::outgoing</code> or something hits CSS eventually, that’d be cool.</p><p><h3 class=jp-relatedposts-headline>Related</h3></p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmibmKe2tK%2FOsqCeql6jsrV7kWlpbGdhZXx0fI6er6KsXZa7qrnAraCopqNk</p><footer class=site-footer><span class=site-footer-credits>Made with <a href=https://gohugo.io/>Hugo</a>. © 2022. All rights reserved.</span></footer></section><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>